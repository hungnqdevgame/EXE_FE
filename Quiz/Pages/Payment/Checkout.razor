@page "/checkout"
@inject HttpClient Http
@inject NavigationManager Navigation

<h3>Thanh toán MoMo</h3>

<button class="btn btn-danger" @onclick="CreatePayment">Thanh toán</button>

@code {
    private async Task CreatePayment()
    {
        var payment = new
        {
            UserId = 1,
            Amount = 200000
        };

        var response = await Http.PostAsJsonAsync("https://localhost:7102/api/payment/CreatePaymentUrl", payment);

        if (response.IsSuccessStatusCode)
        {
            var result = await response.Content.ReadFromJsonAsync<Dictionary<string, string>>();
            var payUrl = result["payUrl"];
            Navigation.NavigateTo(payUrl, forceLoad: true);
        }
    }
}
